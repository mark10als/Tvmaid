Tvmaid R4 (´･ω･`) mod3


これはTvmaidに自分用に手を加えたものです

オリジナル作者様に感謝感謝です
http://nana2.sarashi.com/


■注意！
これは何もわからない素人が自分用に手を加えたものでして、オリジナル作者様かどこかのプロが実装してくれるまでのつなぎです
どんなことが起こっても責任は取りません。絶対に！
自己責任で人柱になっても良いという方のみお使いください


■追加・修正したとこ

・録画ファイル名に対する変換文字列を追加
	標準の番組名と開始時間に加え、放送局名とサービスID(16進数)の変換を追加しました

・録画終了後コマンド実行
	録画終了後にuser/Tvmaid.def内に記述されたコマンドを実行します
	録画エラーで終了した場合は実行されません

・ダミーTVTest起動
	実際に録画する前にTVTestのチャンネルを合わせておく機能（連続録画時、ダミーは起動されません）
	録画2分前にチャンネルを設定したダミーのTVTestを10秒程度起動します
	チャンネル変更に失敗した場合、計2回までダミーTVtestの起動を試みます
	チャンネル変更に不安の無い場合はuser/Tvmaid.defにtvtest.no.dummy=1を追記してください

・ぴったり録画開始
	実際に録画する約10秒前にTVTestを起動し録画開始時間が来るまで待機させます

・TVTestが異常終了した場合、プロセスが残ったままになる場合があることへの対処
	TVTestという名前のプロセスを全て終了させます
	全てのTVTestが終了してしまいますので、複数チューナーで運用する場合等は
	user/Tvmaid.defにtvtest.no.kill=1を追記したほうがよいでしょう
	うちは1チューナーかつ他の目的でTVTestを使用しない運用なので・・


■user/Tvmaid.defの修正・追記につきまして

・録画ファイル名変換（既存のrecord.file項目を修正してください）
	{service-name}	放送局名
	{service-id}	サービスIDの16進数
	例：	番組名 放送局名 [s0xサービスID].ts　としたい場合
		record.file={title} {service-name} [s0x{service-id}].ts

・録画後のコマンド実行
	実行したいコマンドをexe1、exe2、exe3・・というふうに順番に記述してください
	パラメータを渡したい場合は、exe1にはpara1、exe2にはpara2・・というふうに記述してください
	{file}は録画ファイル名に変換されます
	コマンドは１つ１つ順番に実行されます。（同時に複数録画が終了した場合も１つ１つ実行されます）
	例：	exe1=C:\Program Files (x86)\CMSkip\CMSkip.exe
		para1="{file}"
		exe2=C:\Program Files (x86)\ChapterMove\ChapterMove.exe
		para2=-vp "D:\My Videos"

・ダミーTVTestを起動したくない場合
	tvtest.no.dummy=1
	を追加してください

・TVTest異常終了時、名前指定で終了させたくない場合
	tvtest.no.kill=1
	を追加してください
	特に複数チューナーで使用する場合はこちらを指定したほうが無難です


■おまけ
番組表にちょっとだけ手を加えたものを付けときました
